import { Button, VerticalBox } from "std-widgets.slint";
import { Topbar, RepositoryData } from "modules/topbar.slint";

export component AppWindow inherits Window {
    min-width: 1920px;
    min-height: 1080px;
    in property <[RepositoryData]> repo-model: [
        { id: "1", name: "my-awesome-project", is-active: true },
        { id: "2", name: "backend-api", is-active: false },
    ];
    private property <string> active-repo-id: "1";

    VerticalLayout {
        Topbar {
            repositories: root.repo-model;
            current-id: root.active-repo-id;
            // 處理事件
            repo-selected(id) => {
                debug("Selected repo ID:", id);
                root.active-repo-id = id;
                // 這裡可以呼叫 C++ callback 去更新 model
            }
            fetch-clicked => {
                debug("Fetch clicked");
            }
        }
        
        // 為了讓 Topbar 不會佔滿整個畫面，我們可以加一個填充區
        Rectangle { 
            background: #f0f0f0;
            Text { text: "Content Area"; }
        }
    }
}
